---
title: "homework1"
author: "xbw"
date: "2025-09-17"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

1.  

-   a

```{r}
 iowa.df<-read.csv("D:/postgraduate/data science/mynotes/data/iowa.csv", sep = ';', header=T)
```

````         
b.33 rows and 10 columns

c.Year Rain0 Temp1 Rain1 Temp2 Rain2 Temp3 Rain3 Temp4 Yield

d.  The value of row 5, column 7 of iowa.df is 79.7

e.  

```{r}
iowa.df[2,]
```
````

2.  

    a.  因为vector1的元素被定义为character类型，所以vector1的元素在比较和排序时根据字符的ASCII码按照字典序进行，“5”,"12","7","32",按照首个字符的ASCII码进行排序，“1”\<"3"\<"5"\<"7",所以max(vector1)返回“7”,sort(vector1)返回"12" "32" "5" "7" sum()的参数不能为character,所以会报错
    b.  

    -   当创建向量vector2 \<- c("5",7,12)时,由于包含了不同类型的元素，所以R会自动进行强制类型转换，以确保所有元素类型相同，因为存在字符串"5",所以7和12都被转换为character,当执行vector2[2] + vector2[3]时，试图对两个字符元素（即"7"和"12"）使用加法操作符+，在R中+不能用于character，因此会抛出异常。
    -   dataframe3 \<- data.frame(z1="5",z2=7,z3=12)这句代码创建了一个有三列数据的dataframe，列名分别为z1,z2,z3,元素为"5",7,12 dataframe3[1,2] + dataframe3[1,3] 将dataframe3第1行2列和3列的元素相加，返回19
    -   list4[[2]]+list4[[4]]返回结果为168，而list4[2]+list4[4]会报错，因为list4[[2]]返回的是列表list4中的第二个元素，可以直接运算；而list4[2]返回的是包含第二个元素的子列表，列表的数据类型不能进行运算。

3.  

    a.  

    ```{r}
     #design an expression that will give you the sequence of numbers from 1 to 10000 in increments of 372.
    seq(1,10000,by=372)
    #Design another that will give you a sequence between 1 and 10000 that is exactly 50 numbers in length.
    seq(1,10000,by=(10000/50))
    ```

    b.  rep(1:3, times=3) 是将整个向量重复3次，输出为123123123；而rep(1:3, each=3)是将向量中每个元素重复三次，输出为111222333

MB.Ch1.2.

```{r}
#Create a new data frame by extracting these rows from orings
orings_subset <- orings[c(1,2,4,11,13,18), ] 
#plot total incidents against temperature for this new data frame
plot(orings_subset$Temperature,orings_subset$Total,xlab = "Temperature",ylab="Total Incidents", main = "ORing Damage vs Temperature")
#plot for the full dataset
plot(orings$Temperature,orings$Total,xlab = "Temperature",ylab="Total Incidents", main = "ORing Damage vs Temperature")
```

MB.Ch1.4.
(a).
```{r}
str(ais) 
colSums(is.na(ais))#统计ais中每一列缺失值的数量，结果都为0，所以全都没有缺失值
```
(b).
```{r}
#Make a table that shows the numbers of males and females for each different sport
sport_sex_table <- table(ais$sport, ais$sex)
sport_sex_df <- as.data.frame(sport_sex_table) #将table转换为data frame
colnames(sport_sex_df) <- c("Sport", "Sex", "Count") #修改列名
grouped_data <- group_by(sport_sex_df,Sport) #将数据根据运动分组
#统计
summarized_data <- summarise(
  grouped_data,
  Male = sum(Count[Sex == "m"]),
  Female = sum(Count[Sex == "f"]),
  Total = sum(Count),
  Ratio = round(Male / Female, 2)
)
#筛选出男女比例大于2的运动
imbalanced_sports <- filter(summarized_data,Ratio > 2 | Ratio < 0.5 | is.infinite(Ratio))
print(imbalanced_sports)
#或者使用管道运算符
imbalanced_sports <- sport_sex_df %>% group_by(Sport) %>% summarise( 
  Male = sum(Count[Sex == "m"]),
  Female = sum(Count[Sex == "f"]),
  Total = sum(Count),
  Ratio = round(Male / Female, 2)) %>% filter(Ratio > 2 | Ratio < 0.5 | is.infinite(Ratio))
```
MB.Ch1.6.
```{r}
 col1 <- c("Winnipeg","Winnipegosis","Manitoba","SouthernIndian","Cedar","Island","Gods","Cross","Playgreen")
 col2 <- c(217,254,248,254,253,227,178,207,217)
 col3 <- c(24387,5374,4624,2247,1353,1223,1151,755,657)
 Manitoba.lakes <- data.frame(col2, col3) #生成data frame
 Manitoba.lakes <- data.frame("elevation" = col2,"area" = col3) #设置列名
 row.names(Manitoba.lakes) <- col1 #设置行名
```
MB.Ch1.7.
(a)
```{r}
dotchart(Manitoba.lakes$area, labels = row.names(Manitoba.lakes), main = "Area of Manitoba Lakes (Linear Scale)",xlab = "Area (square km)")
```
(b)
```{r}
 dotchart(log2(Manitoba.lakes$area), labels = row.names(Manitoba.lakes),main = "Area of Manitoba Lakes (Logarithmic Scale - log2)", xlab = expression(log[2](Area) ~ (km^2)))
```
MB.Ch1.8.
```{r}
total_water_area <- sum(Manitoba.lakes$area)
```

